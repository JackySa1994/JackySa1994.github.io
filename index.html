<!DOCTYPE html>

<script src="https://d3js.org/d3.v5.min.js"></script>

<style> .chart rect {fill: steelblue} 
#tooltip {
    opacity: 0;
    position: absolute;
    text-align: center;
    width:100px; height:50px;
    background: white;
    border:0px;
}
</style>

<html>
<h1>Pokemon</h1>

<body onload = "load_data()">
<p> Analysis of the number of Pokemon Across Generations, Types and Attack Powers!</p>

<p> This chart currently shows Pokemon across all generations. Click on a bar to explore that generation further, by Types and Attack Powers</p>

<svg class="chart" width="1500" height="500">
</svg>

<div id="tooltip" opacity =0></div>

<script>

async function load_data() {
    const dataf = await d3.csv('https://raw.githubusercontent.com/JackySa1994/JackySa1994.github.io/main/pokemon-2.csv')
    chart_generations(dataf)
    ;}

function chart_generations(dataf) {
    var data_g = [1,2,3,4,5,6,7] ;
    var data_g_c = [0,0,0,0,0,0,0] ;


    for (let i = 0; i < 801; i++)
        {gen = dataf[i].generation - 1
         data_g_c[gen] = data_g_c[gen] + 1
        }

    var width = 400;
    var height = 400;
    var margin = 40;


    var y = d3.scaleLinear()
        .domain([50,170])
        .range([height,0]);

    var x = d3.scaleLinear()
        .domain([0.5,7.5])
        .range([0, width]);

    var tooltip = d3.select("#tooltip");

    d3.select("svg")
        .append("g")
        .attr("transform","translate("+margin+","+margin+")")
        .call(d3.axisLeft(y))
        .append("text")

    d3.select("svg")
        .append("g")
        .attr("transform","translate("+margin+","+(height+margin)+")")
        .call(d3.axisBottom(x).ticks(7));

    d3.select("svg")
        .append("text")
        .attr("x", margin + (width / 2))             
        .attr("y", margin)
        .attr("text-anchor", "middle")  
        .style("font-size", "16px") 
        .style("text-decoration", "underline")  
        .text("Number of Pokemon Across Different Generations");

    d3.select("svg")
        .selectAll("rect")
        .data(data_g_c)
        .enter().append("rect")
        .attr("width",30)
        .attr("height",function(data_g_c) {return height - y(data_g_c); })
        .attr("x",function(data_g,i) {return 2 * margin + x(i);})
        .attr("y",function(data_g_c) {return margin + y(data_g_c); })
        .on("mouseover", function(data_g_c,i) {
            tooltip.style("opacity",1)
                .style("left",(d3.event.pageX)+"px")
                .style("top",(d3.event.pageY)+"px")
                .html("There are " + data_g_c + " " + "generation " + (i + 1) + " Pokemon");})
        .on("mouseout",function(){tooltip.style("opacity",0)})
        .on("click",chart_types(i+1));

}

function chart_types(gen) {
    d3.select("svg").html = "" 

}

</script>
</body>

</html>





